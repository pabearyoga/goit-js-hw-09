{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAOC,SAASC,cAAc,SAC9BC,EAAaF,SAASC,cAAc,uBACpCE,EAAYH,SAASC,cAAc,sBACnCG,EAAcJ,SAASC,cAAc,wBACrCI,EAASL,SAASC,cAAc,yBACtC,IAAIK,EAAgB,EAChBC,EAAS,KACTC,EAAa,KACbC,EAAY,KACZC,EAAU,KAEdX,EAAKY,iBAAiB,SAkBtB,WACEC,cAAcF,GA2BdF,EAAaK,OAAOX,EAAWY,OACN,KAArBZ,EAAWY,QACbN,EAAa,GAIfC,EAAYI,OAAOV,EAAUW,OACL,KAApBX,EAAUW,QACZL,EAAY,GAIdF,EAASM,OAAOT,EAAYU,OACF,KAAtBV,EAAYU,QACdP,EAAS,MA3DbF,EAAOM,iBAAiB,SAwBxB,SAAuBI,GACrBA,EAAMC,iBACNN,EAAUO,aAAY,KAxBxB,IAAuBC,EAAUC,EAyBzBb,IAAkBC,EAAS,KAzBZW,EA4BLZ,EA5Bea,EA4BAX,EA3BxB,IAAIY,SAAQ,CAACC,EAASC,KAC3BC,YAAW,KACaC,KAAKC,SAAW,GAGpCJ,EAAQ,C,SAAEH,E,MAAUC,IAGpBG,EAAO,C,SAAEJ,E,MAAUC,MAEpBA,OAkBAO,MAAK,EAACR,SAAEA,EAAQC,MAAEA,MACjBtB,EAAA8B,OAAOC,QAAQ,uBAAqBV,QAAiBC,UAEtDU,OAAM,EAACX,SAAEA,EAAQC,MAAEA,MAClBtB,EAAA8B,OAAOG,QAAQ,sBAAoBZ,QAAeC,UAEtDb,GAAiB,EACjBE,GAAcC,KACbF,GAEHD,EAAgB","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst form = document.querySelector('.form');\nconst delayInput = document.querySelector('input[name=\"delay\"]');\nconst stepInput = document.querySelector('input[name=\"step\"]');\nconst amountInput = document.querySelector('input[name=\"amount\"]');\nconst submit = document.querySelector('button[type=\"submit\"]');\nlet firstPosition = 1;\nlet amount = null;\nlet firstDelay = null;\nlet delayStep = null;\nlet timerId = null;\n\nform.addEventListener('input', onFormInput);\nsubmit.addEventListener('click', onSubmitClick);\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const shouldResolve = Math.random() > 0.3;\n      if (shouldResolve) {\n        // Fulfill\n        resolve({ position, delay });\n      } else {\n        // Reject\n        reject({ position, delay });\n      }\n    }, delay);\n  });\n}\n\nfunction onFormInput() {\n  clearInterval(timerId);\n  onDelayInputValue();\n  onStepInputValue();\n  onAmountInputValue();\n}\n\nfunction onSubmitClick(event) {\n  event.preventDefault();\n  timerId = setInterval(() => {\n    if (firstPosition === amount + 1) {\n      return;\n    }\n    createPromise(firstPosition, firstDelay)\n      .then(({ position, delay }) => {\n        Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`);\n      })\n      .catch(({ position, delay }) => {\n        Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`);\n      });\n    firstPosition += 1;\n    firstDelay += delayStep;\n  }, amount);\n\n  firstPosition = 1;\n}\n\nfunction onDelayInputValue() {\n  firstDelay = Number(delayInput.value);\n  if (delayInput.value === '') {\n    firstDelay = 0;\n  }\n}\nfunction onStepInputValue() {\n  delayStep = Number(stepInput.value);\n  if (stepInput.value === '') {\n    delayStep = 0;\n  }\n}\nfunction onAmountInputValue() {\n  amount = Number(amountInput.value);\n  if (amountInput.value === '') {\n    amount = 0;\n  }\n}\n"],"names":["$iQIUW","parcelRequire","$47d4ff9957288465$var$form","document","querySelector","$47d4ff9957288465$var$delayInput","$47d4ff9957288465$var$stepInput","$47d4ff9957288465$var$amountInput","$47d4ff9957288465$var$submit","$47d4ff9957288465$var$firstPosition","$47d4ff9957288465$var$amount","$47d4ff9957288465$var$firstDelay","$47d4ff9957288465$var$delayStep","$47d4ff9957288465$var$timerId","addEventListener","clearInterval","Number","value","event","preventDefault","setInterval","position","delay","Promise","resolve","reject","setTimeout","Math","random","then","Notify","success","catch","failure"],"version":3,"file":"03-promises.d48c68c9.js.map"}