{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAOC,SAASC,cAAc,SAC9BC,EAAaF,SAASC,cAAc,uBACpCE,EAAYH,SAASC,cAAc,sBACnCG,EAAcJ,SAASC,cAAc,wBACrCI,EAASL,SAASC,cAAc,yBAClCK,EAAgB,EAChBC,EAAS,KACTC,EAAa,KACbC,EAAY,KACZC,EAAU,KAEdX,EAAKY,iBAAiB,SAkBtB,WACEC,cAAcF,GA2BdF,EAAaK,OAAOX,EAAWY,OACN,KAArBZ,EAAWY,QACbN,EAAa,GAIfC,EAAYI,OAAOV,EAAUW,OACL,KAApBX,EAAUW,QACZL,EAAY,GAIdF,EAASM,OAAOT,EAAYU,OACF,KAAtBV,EAAYU,QACdP,EAAS,MA3DbF,EAAOM,iBAAiB,SAwBxB,SAAuBI,GACrBA,EAAMC,iBACNN,EAAUO,aAAY,WAxBxB,IAAuBC,EAAUC,EAyBzBb,IAAkBC,EAAS,KAzBZW,EA4BLZ,EA5Bea,EA4BAX,EA3BxB,IAAIY,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACaC,KAAKC,SAAW,GAGpCJ,EAAQ,CAAEH,WAAUC,UAGpBG,EAAO,CAAEJ,WAAUC,YAEpBA,OAkBAO,MAAK,SAAAC,G,IAAGT,EAAQS,EAART,SAAUC,EAAKQ,EAALR,MACjBtB,EAAA+B,OAAOC,QAAQ,uBAAwCC,OAAfZ,EAAS,QAAYY,OAANX,EAAM,UAE9DY,OAAM,SAAAJ,G,IAAGT,EAAQS,EAART,SAAUC,EAAKQ,EAALR,MAClBtB,EAAA+B,OAAOI,QAAQ,sBAAqCF,OAAfZ,EAAS,QAAYY,OAANX,EAAM,UAE9Db,GAAiB,EACjBE,GAAcC,KACbF,GAEHD,EAAgB,K","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst form = document.querySelector('.form');\nconst delayInput = document.querySelector('input[name=\"delay\"]');\nconst stepInput = document.querySelector('input[name=\"step\"]');\nconst amountInput = document.querySelector('input[name=\"amount\"]');\nconst submit = document.querySelector('button[type=\"submit\"]');\nlet firstPosition = 1;\nlet amount = null;\nlet firstDelay = null;\nlet delayStep = null;\nlet timerId = null;\n\nform.addEventListener('input', onFormInput);\nsubmit.addEventListener('click', onSubmitClick);\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const shouldResolve = Math.random() > 0.3;\n      if (shouldResolve) {\n        // Fulfill\n        resolve({ position, delay });\n      } else {\n        // Reject\n        reject({ position, delay });\n      }\n    }, delay);\n  });\n}\n\nfunction onFormInput() {\n  clearInterval(timerId);\n  onDelayInputValue();\n  onStepInputValue();\n  onAmountInputValue();\n}\n\nfunction onSubmitClick(event) {\n  event.preventDefault();\n  timerId = setInterval(() => {\n    if (firstPosition === amount + 1) {\n      return;\n    }\n    createPromise(firstPosition, firstDelay)\n      .then(({ position, delay }) => {\n        Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`);\n      })\n      .catch(({ position, delay }) => {\n        Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`);\n      });\n    firstPosition += 1;\n    firstDelay += delayStep;\n  }, amount);\n\n  firstPosition = 1;\n}\n\nfunction onDelayInputValue() {\n  firstDelay = Number(delayInput.value);\n  if (delayInput.value === '') {\n    firstDelay = 0;\n  }\n}\nfunction onStepInputValue() {\n  delayStep = Number(stepInput.value);\n  if (stepInput.value === '') {\n    delayStep = 0;\n  }\n}\nfunction onAmountInputValue() {\n  amount = Number(amountInput.value);\n  if (amountInput.value === '') {\n    amount = 0;\n  }\n}\n"],"names":["$h6c0i","parcelRequire","$ce04d3a99e08e73b$var$form","document","querySelector","$ce04d3a99e08e73b$var$delayInput","$ce04d3a99e08e73b$var$stepInput","$ce04d3a99e08e73b$var$amountInput","$ce04d3a99e08e73b$var$submit","$ce04d3a99e08e73b$var$firstPosition","$ce04d3a99e08e73b$var$amount","$ce04d3a99e08e73b$var$firstDelay","$ce04d3a99e08e73b$var$delayStep","$ce04d3a99e08e73b$var$timerId","addEventListener","clearInterval","Number","value","event","preventDefault","setInterval","position","delay","Promise","resolve","reject","setTimeout","Math","random","then","param","Notify","success","concat","catch","failure"],"version":3,"file":"03-promises.66612799.js.map"}